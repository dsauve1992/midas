import { createMock, DeepMocked } from '@golevelup/ts-jest';
import { FinancialModelingPrepService } from '../../../historical-data/financial-modeling-prep.service';
import { Test, TestingModule } from '@nestjs/testing';
import { GetAnnuallyIncomeStatementV2UseCase } from '../get-annually-income-statement-v2.use-case';

const AAPL_INCOME_STATEMENTS = [
  {
    date: '2023-09-30',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2023-11-03',
    acceptedDate: '2023-11-02 18:08:27',
    calendarYear: '2023',
    period: 'FY',
    revenue: 383285000000,
    costOfRevenue: 214137000000,
    grossProfit: 169148000000,
    grossProfitRatio: 0.4413112958,
    researchAndDevelopmentExpenses: 29915000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 24932000000,
    otherExpenses: -565000000,
    operatingExpenses: 54847000000,
    costAndExpenses: 268984000000,
    interestIncome: 3750000000,
    interestExpense: 3933000000,
    depreciationAndAmortization: 11519000000,
    ebitda: 125820000000,
    ebitdaratio: 0.3282674772,
    operatingIncome: 114301000000,
    operatingIncomeRatio: 0.2982141227,
    totalOtherIncomeExpensesNet: -565000000,
    incomeBeforeTax: 113736000000,
    incomeBeforeTaxRatio: 0.2967400237,
    incomeTaxExpense: 16741000000,
    netIncome: 96995000000,
    netIncomeRatio: 0.2530623426,
    eps: 6.16,
    epsdiluted: 6.13,
    weightedAverageShsOut: 15744231000,
    weightedAverageShsOutDil: 15812547000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019323000106/0000320193-23-000106-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019323000106/aapl-20230930.htm',
  },
  {
    date: '2022-09-24',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2022-10-28',
    acceptedDate: '2022-10-27 18:01:14',
    calendarYear: '2022',
    period: 'FY',
    revenue: 394328000000,
    costOfRevenue: 223546000000,
    grossProfit: 170782000000,
    grossProfitRatio: 0.4330963056,
    researchAndDevelopmentExpenses: 26251000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 25094000000,
    otherExpenses: -334000000,
    operatingExpenses: 51345000000,
    costAndExpenses: 274891000000,
    interestIncome: 2825000000,
    interestExpense: 2931000000,
    depreciationAndAmortization: 11104000000,
    ebitda: 130541000000,
    ebitdaratio: 0.3310467428,
    operatingIncome: 119437000000,
    operatingIncomeRatio: 0.302887444,
    totalOtherIncomeExpensesNet: -334000000,
    incomeBeforeTax: 119103000000,
    incomeBeforeTaxRatio: 0.3020404333,
    incomeTaxExpense: 19300000000,
    netIncome: 99803000000,
    netIncomeRatio: 0.2530964071,
    eps: 6.15,
    epsdiluted: 6.11,
    weightedAverageShsOut: 16215963000,
    weightedAverageShsOutDil: 16325819000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019322000108/0000320193-22-000108-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019322000108/aapl-20220924.htm',
  },
  {
    date: '2021-09-25',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2021-10-29',
    acceptedDate: '2021-10-28 18:04:28',
    calendarYear: '2021',
    period: 'FY',
    revenue: 365817000000,
    costOfRevenue: 212981000000,
    grossProfit: 152836000000,
    grossProfitRatio: 0.4177935963,
    researchAndDevelopmentExpenses: 21914000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 21973000000,
    otherExpenses: 258000000,
    operatingExpenses: 43887000000,
    costAndExpenses: 256868000000,
    interestIncome: 2843000000,
    interestExpense: 2645000000,
    depreciationAndAmortization: 11284000000,
    ebitda: 120233000000,
    ebitdaratio: 0.3286697994,
    operatingIncome: 108949000000,
    operatingIncomeRatio: 0.2978237753,
    totalOtherIncomeExpensesNet: 258000000,
    incomeBeforeTax: 109207000000,
    incomeBeforeTaxRatio: 0.2985290459,
    incomeTaxExpense: 14527000000,
    netIncome: 94680000000,
    netIncomeRatio: 0.2588179336,
    eps: 5.67,
    epsdiluted: 5.61,
    weightedAverageShsOut: 16701272000,
    weightedAverageShsOutDil: 16864919000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019321000105/0000320193-21-000105-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019321000105/aapl-20210925.htm',
  },
  {
    date: '2020-09-26',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2020-10-30',
    acceptedDate: '2020-10-29 18:06:25',
    calendarYear: '2020',
    period: 'FY',
    revenue: 274515000000,
    costOfRevenue: 169559000000,
    grossProfit: 104956000000,
    grossProfitRatio: 0.3823324773,
    researchAndDevelopmentExpenses: 18752000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 19916000000,
    otherExpenses: 803000000,
    operatingExpenses: 38668000000,
    costAndExpenses: 208227000000,
    interestIncome: 3763000000,
    interestExpense: 2873000000,
    depreciationAndAmortization: 11056000000,
    ebitda: 77344000000,
    ebitdaratio: 0.2817478098,
    operatingIncome: 66288000000,
    operatingIncomeRatio: 0.2414731435,
    totalOtherIncomeExpensesNet: 803000000,
    incomeBeforeTax: 67091000000,
    incomeBeforeTaxRatio: 0.2443983025,
    incomeTaxExpense: 9680000000,
    netIncome: 57411000000,
    netIncomeRatio: 0.2091361128,
    eps: 3.31,
    epsdiluted: 3.28,
    weightedAverageShsOut: 17352119000,
    weightedAverageShsOutDil: 17528214000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019320000096/0000320193-20-000096-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019320000096/aapl-20200926.htm',
  },
  {
    date: '2019-09-28',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2019-10-31',
    acceptedDate: '2019-10-30 18:12:36',
    calendarYear: '2019',
    period: 'FY',
    revenue: 260174000000,
    costOfRevenue: 161782000000,
    grossProfit: 98392000000,
    grossProfitRatio: 0.3781776811,
    researchAndDevelopmentExpenses: 16217000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 18245000000,
    otherExpenses: 1807000000,
    operatingExpenses: 34462000000,
    costAndExpenses: 196244000000,
    interestIncome: 4961000000,
    interestExpense: 3576000000,
    depreciationAndAmortization: 12547000000,
    ebitda: 76477000000,
    ebitdaratio: 0.2939455903,
    operatingIncome: 63930000000,
    operatingIncomeRatio: 0.2457201719,
    totalOtherIncomeExpensesNet: 1807000000,
    incomeBeforeTax: 65737000000,
    incomeBeforeTaxRatio: 0.2526655238,
    incomeTaxExpense: 10481000000,
    netIncome: 55256000000,
    netIncomeRatio: 0.2123809451,
    eps: 2.99,
    epsdiluted: 2.97,
    weightedAverageShsOut: 18471336000,
    weightedAverageShsOutDil: 18595652000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019319000119/0000320193-19-000119-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019319000119/a10-k20199282019.htm',
  },
  {
    date: '2018-09-29',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2018-11-05',
    acceptedDate: '2018-11-05 08:01:40',
    calendarYear: '2018',
    period: 'FY',
    revenue: 265595000000,
    costOfRevenue: 163756000000,
    grossProfit: 101839000000,
    grossProfitRatio: 0.3834371882,
    researchAndDevelopmentExpenses: 14236000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 16705000000,
    otherExpenses: 2005000000,
    operatingExpenses: 30941000000,
    costAndExpenses: 194697000000,
    interestIncome: 5686000000,
    interestExpense: 3240000000,
    depreciationAndAmortization: 10903000000,
    ebitda: 81801000000,
    ebitdaratio: 0.3079914908,
    operatingIncome: 70898000000,
    operatingIncomeRatio: 0.2669402662,
    totalOtherIncomeExpensesNet: 2005000000,
    incomeBeforeTax: 72903000000,
    incomeBeforeTaxRatio: 0.2744893541,
    incomeTaxExpense: 13372000000,
    netIncome: 59531000000,
    netIncomeRatio: 0.2241420207,
    eps: 3,
    epsdiluted: 2.98,
    weightedAverageShsOut: 19821508000,
    weightedAverageShsOutDil: 20000436000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019318000145/0000320193-18-000145-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019318000145/a10-k20189292018.htm',
  },
  {
    date: '2017-09-30',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2017-11-03',
    acceptedDate: '2017-11-03 08:01:37',
    calendarYear: '2017',
    period: 'FY',
    revenue: 229234000000,
    costOfRevenue: 141048000000,
    grossProfit: 88186000000,
    grossProfitRatio: 0.3846986049,
    researchAndDevelopmentExpenses: 11581000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 15261000000,
    otherExpenses: 2745000000,
    operatingExpenses: 26842000000,
    costAndExpenses: 167890000000,
    interestIncome: 5201000000,
    interestExpense: 2323000000,
    depreciationAndAmortization: 10157000000,
    ebitda: 71501000000,
    ebitdaratio: 0.311912718,
    operatingIncome: 61344000000,
    operatingIncomeRatio: 0.2676042821,
    totalOtherIncomeExpensesNet: 2745000000,
    incomeBeforeTax: 64089000000,
    incomeBeforeTaxRatio: 0.2795789455,
    incomeTaxExpense: 15738000000,
    netIncome: 48351000000,
    netIncomeRatio: 0.2109242085,
    eps: 2.32,
    epsdiluted: 2.3,
    weightedAverageShsOut: 20868968000,
    weightedAverageShsOutDil: 21006768000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000032019317000070/0000320193-17-000070-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000032019317000070/a10-k20179302017.htm',
  },
  {
    date: '2016-09-24',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2016-10-26',
    acceptedDate: '2016-10-26 16:42:16',
    calendarYear: '2016',
    period: 'FY',
    revenue: 215639000000,
    costOfRevenue: 131376000000,
    grossProfit: 84263000000,
    grossProfitRatio: 0.3907595565,
    researchAndDevelopmentExpenses: 10045000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 14194000000,
    otherExpenses: 1348000000,
    operatingExpenses: 24239000000,
    costAndExpenses: 155615000000,
    interestIncome: 3999000000,
    interestExpense: 1456000000,
    depreciationAndAmortization: 10505000000,
    ebitda: 70529000000,
    ebitdaratio: 0.3270697787,
    operatingIncome: 62567000000,
    operatingIncomeRatio: 0.2901469586,
    totalOtherIncomeExpensesNet: 1348000000,
    incomeBeforeTax: 61372000000,
    incomeBeforeTaxRatio: 0.2846052894,
    incomeTaxExpense: 15685000000,
    netIncome: 45687000000,
    netIncomeRatio: 0.2118679831,
    eps: 2.09,
    epsdiluted: 2.08,
    weightedAverageShsOut: 21883280000,
    weightedAverageShsOutDil: 22001124000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000162828016020309/0001628280-16-020309-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000162828016020309/a201610-k9242016.htm',
  },
  {
    date: '2015-09-26',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2015-10-28',
    acceptedDate: '2015-10-28 16:31:09',
    calendarYear: '2015',
    period: 'FY',
    revenue: 233715000000,
    costOfRevenue: 140089000000,
    grossProfit: 93626000000,
    grossProfitRatio: 0.4005990202,
    researchAndDevelopmentExpenses: 8067000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 14329000000,
    otherExpenses: 1285000000,
    operatingExpenses: 22396000000,
    costAndExpenses: 162485000000,
    interestIncome: 2921000000,
    interestExpense: 733000000,
    depreciationAndAmortization: 11257000000,
    ebitda: 82487000000,
    ebitdaratio: 0.3529384079,
    operatingIncome: 71230000000,
    operatingIncomeRatio: 0.3047729072,
    totalOtherIncomeExpensesNet: 1285000000,
    incomeBeforeTax: 72515000000,
    incomeBeforeTaxRatio: 0.3102710566,
    incomeTaxExpense: 19121000000,
    netIncome: 53394000000,
    netIncomeRatio: 0.228457737,
    eps: 2.32,
    epsdiluted: 2.31,
    weightedAverageShsOut: 23013684000,
    weightedAverageShsOutDil: 23172276000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000119312515356351/0001193125-15-356351-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000119312515356351/d17062d10k.htm',
  },
  {
    date: '2014-09-27',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2014-10-27',
    acceptedDate: '2014-10-27 17:11:55',
    calendarYear: '2014',
    period: 'FY',
    revenue: 182795000000,
    costOfRevenue: 112258000000,
    grossProfit: 70537000000,
    grossProfitRatio: 0.3858803578,
    researchAndDevelopmentExpenses: 6041000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 11993000000,
    otherExpenses: -431000000,
    operatingExpenses: 18034000000,
    costAndExpenses: 130292000000,
    interestIncome: 1795000000,
    interestExpense: 384000000,
    depreciationAndAmortization: 7946000000,
    ebitda: 61813000000,
    ebitdaratio: 0.3381547635,
    operatingIncome: 52503000000,
    operatingIncomeRatio: 0.2872233923,
    totalOtherIncomeExpensesNet: 980000000,
    incomeBeforeTax: 53483000000,
    incomeBeforeTaxRatio: 0.2925845893,
    incomeTaxExpense: 13973000000,
    netIncome: 39510000000,
    netIncomeRatio: 0.2161437676,
    eps: 1.62,
    epsdiluted: 1.61,
    weightedAverageShsOut: 24342288000,
    weightedAverageShsOutDil: 24490652000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000119312514383437/0001193125-14-383437-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000119312514383437/d783162d10k.htm',
  },
  {
    date: '2013-09-28',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2013-10-30',
    acceptedDate: '2013-10-29 20:38:28',
    calendarYear: '2013',
    period: 'FY',
    revenue: 170910000000,
    costOfRevenue: 106606000000,
    grossProfit: 64304000000,
    grossProfitRatio: 0.3762448072,
    researchAndDevelopmentExpenses: 4475000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 10830000000,
    otherExpenses: 1156000000,
    operatingExpenses: 15305000000,
    costAndExpenses: 121911000000,
    interestIncome: 1616000000,
    interestExpense: 136000000,
    depreciationAndAmortization: 6757000000,
    ebitda: 55756000000,
    ebitdaratio: 0.3262301796,
    operatingIncome: 50479000000,
    operatingIncomeRatio: 0.29535428,
    totalOtherIncomeExpensesNet: 1156000000,
    incomeBeforeTax: 50155000000,
    incomeBeforeTaxRatio: 0.2934585454,
    incomeTaxExpense: 13118000000,
    netIncome: 37037000000,
    netIncomeRatio: 0.2167046984,
    eps: 1.43,
    epsdiluted: 1.42,
    weightedAverageShsOut: 25909268000,
    weightedAverageShsOutDil: 26086536000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000119312513416534/0001193125-13-416534-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000119312513416534/d590790d10k.htm',
  },
  {
    date: '2012-09-29',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2012-10-31',
    acceptedDate: '2012-10-31 17:07:19',
    calendarYear: '2012',
    period: 'FY',
    revenue: 156508000000,
    costOfRevenue: 87846000000,
    grossProfit: 68662000000,
    grossProfitRatio: 0.4387123981,
    researchAndDevelopmentExpenses: 3381000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 10040000000,
    otherExpenses: 522000000,
    operatingExpenses: 13421000000,
    costAndExpenses: 101267000000,
    interestIncome: 1088000000,
    interestExpense: -522000000,
    depreciationAndAmortization: 3277000000,
    ebitda: 58518000000,
    ebitdaratio: 0.3738978199,
    operatingIncome: 55241000000,
    operatingIncomeRatio: 0.3529595931,
    totalOtherIncomeExpensesNet: 522000000,
    incomeBeforeTax: 55763000000,
    incomeBeforeTaxRatio: 0.3562948859,
    incomeTaxExpense: 14030000000,
    netIncome: 41733000000,
    netIncomeRatio: 0.266650906,
    eps: 1.59,
    epsdiluted: 1.58,
    weightedAverageShsOut: 26174904000,
    weightedAverageShsOutDil: 26469940000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000119312512444068/0001193125-12-444068-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000119312512444068/d411355d10k.htm',
  },
  {
    date: '2011-09-24',
    symbol: 'AAPL',
    reportedCurrency: 'USD',
    cik: '0000320193',
    fillingDate: '2011-10-26',
    acceptedDate: '2011-10-26 16:35:25',
    calendarYear: '2011',
    period: 'FY',
    revenue: 108249000000,
    costOfRevenue: 64431000000,
    grossProfit: 43818000000,
    grossProfitRatio: 0.4047889588,
    researchAndDevelopmentExpenses: 2429000000,
    generalAndAdministrativeExpenses: 0,
    sellingAndMarketingExpenses: 0,
    sellingGeneralAndAdministrativeExpenses: 7599000000,
    otherExpenses: 415000000,
    operatingExpenses: 10028000000,
    costAndExpenses: 74459000000,
    interestIncome: 519000000,
    interestExpense: -415000000,
    depreciationAndAmortization: 1814000000,
    ebitda: 35604000000,
    ebitdaratio: 0.3289083502,
    operatingIncome: 33790000000,
    operatingIncomeRatio: 0.3121506896,
    totalOtherIncomeExpensesNet: 415000000,
    incomeBeforeTax: 34205000000,
    incomeBeforeTaxRatio: 0.3159844433,
    incomeTaxExpense: 8283000000,
    netIncome: 25922000000,
    netIncomeRatio: 0.2394664154,
    eps: 1,
    epsdiluted: 0.99,
    weightedAverageShsOut: 25879224000,
    weightedAverageShsOutDil: 26226060000,
    link: 'https://www.sec.gov/Archives/edgar/data/320193/000119312511282113/0001193125-11-282113-index.htm',
    finalLink:
      'https://www.sec.gov/Archives/edgar/data/320193/000119312511282113/d220209d10k.htm',
  },
];

const AAPL_RATIOS = [
  {
    symbol: 'AAPL',
    date: '2023-09-30',
    calendarYear: '2023',
    period: 'FY',
    currentRatio: 0.9880116717592975,
    quickRatio: 0.8433121369780053,
    cashRatio: 0.20621713876730807,
    daysOfSalesOutstanding: 58.07564866874519,
    daysOfInventoryOutstanding: 10.791292490321615,
    operatingCycle: 68.8669411590668,
    daysOfPayablesOutstanding: 106.72146803214763,
    cashConversionCycle: -37.85452687308083,
    grossProfitMargin: 0.4413112957720756,
    operatingProfitMargin: 0.2982141226502472,
    pretaxProfitMargin: 0.296740023742124,
    netProfitMargin: 0.2530623426432028,
    effectiveTaxRate: 0.14719174228036858,
    returnOnAssets: 0.27509834563776475,
    returnOnEquity: 1.5607601454639075,
    returnOnCapitalEmployed: 0.551446146423833,
    netIncomePerEBT: 0.8528082577196314,
    ebtPerEbit: 0.9950569111381353,
    ebitPerRevenue: 0.2982141226502472,
    debtRatio: 0.3150690759338936,
    debtEquityRatio: 1.7875325845589418,
    longTermDebtToCapitalization: 0.6052392537493568,
    totalDebtToCapitalization: 0.6412597988847455,
    interestCoverage: 29.062039155860667,
    cashFlowToDebtRatio: 0.9950939795477459,
    companyEquityMultiplier: 5.673462491552152,
    receivablesTurnover: 6.284906124456834,
    payablesTurnover: 3.420117870661705,
    inventoryTurnover: 33.82356657716001,
    fixedAssetTurnover: 8.767814251401122,
    assetTurnover: 1.087077369016657,
    operatingCashFlowPerShare: 7.021174930677783,
    freeCashFlowPerShare: 6.325110448392176,
    cashPerShare: 3.9096860303942442,
    payoutRatio: 0.1549048920047425,
    operatingCashFlowSalesRatio: 0.28840940814276583,
    freeCashFlowOperatingCashFlowRatio: 0.9008621079579892,
    cashFlowCoverageRatios: 0.9950939795477459,
    shortTermCoverageRatios: 6.9932941102043396,
    capitalExpenditureCoverageRatio: -10.08696048909572,
    dividendPaidAndCapexCoverageRatio: 27.187161829808165,
    dividendPayoutRatio: 0.1549048920047425,
    priceBookValueRatio: 43.37479145093811,
    priceToBookRatio: 43.37479145093811,
    priceToSalesRatio: 7.032807935374461,
    priceEarningsRatio: 27.790811789370586,
    priceToFreeCashFlowsRatio: 27.06830203155125,
    priceToOperatingCashFlowsRatio: 24.384807626986785,
    priceCashFlowRatio: 24.384807626986785,
    priceEarningsToGrowthRatio: 170.91349250462116,
    priceSalesRatio: 7.032807935374461,
    dividendYield: 0.005573960673721321,
    enterpriseValueMultiple: 22.068771177157846,
    priceFairValue: 43.37479145093811,
  },
  {
    symbol: 'AAPL',
    date: '2022-09-24',
    calendarYear: '2022',
    period: 'FY',
    currentRatio: 0.8793560286267226,
    quickRatio: 0.7094075930952969,
    cashRatio: 0.15356340351469652,
    daysOfSalesOutstanding: 56.400204905560855,
    daysOfInventoryOutstanding: 8.07569806661716,
    operatingCycle: 64.47590297217802,
    daysOfPayablesOutstanding: 104.6852773031054,
    cashConversionCycle: -40.209374330927375,
    grossProfitMargin: 0.43309630561360085,
    operatingProfitMargin: 0.30288744395528594,
    pretaxProfitMargin: 0.30204043334482966,
    netProfitMargin: 0.2530964070519973,
    effectiveTaxRate: 0.16204461684424407,
    returnOnAssets: 0.2829244092925685,
    returnOnEquity: 1.9695887275023682,
    returnOnCapitalEmployed: 0.6008713457059057,
    netIncomePerEBT: 0.8379553831557559,
    ebtPerEbit: 0.997203546639651,
    ebitPerRevenue: 0.30288744395528594,
    debtRatio: 0.3403750478377344,
    debtEquityRatio: 2.3695334701610355,
    longTermDebtToCapitalization: 0.6613535965140913,
    totalDebtToCapitalization: 0.7032230102904399,
    interestCoverage: 40.74957352439441,
    cashFlowToDebtRatio: 1.0173400294830472,
    companyEquityMultiplier: 6.961536943479634,
    receivablesTurnover: 6.471607693822622,
    payablesTurnover: 3.486641191608828,
    inventoryTurnover: 45.19733117670845,
    fixedAssetTurnover: 9.362680152907377,
    assetTurnover: 1.1178523337727317,
    operatingCashFlowPerShare: 7.532762624088375,
    freeCashFlowPerShare: 6.872425646259799,
    cashPerShare: 2.9787931805221803,
    payoutRatio: 0.14870294480125848,
    operatingCashFlowSalesRatio: 0.30977003915522106,
    freeCashFlowOperatingCashFlowRatio: 0.9123380078754983,
    cashFlowCoverageRatios: 1.0173400294830472,
    shortTermCoverageRatios: 5.786404547607769,
    capitalExpenditureCoverageRatio: -11.407452372058275,
    dividendPaidAndCapexCoverageRatio: 29.555044761674328,
    dividendPayoutRatio: 0.14870294480125848,
    priceBookValueRatio: 48.14034011071204,
    priceToBookRatio: 48.14034011071204,
    priceToSalesRatio: 6.186137718067193,
    priceEarningsRatio: 24.441823533260525,
    priceToFreeCashFlowsRatio: 21.888923611981014,
    priceToOperatingCashFlowsRatio: 19.970096962693717,
    priceCashFlowRatio: 19.970096962693717,
    priceEarningsToGrowthRatio: 2.8871904048664,
    priceSalesRatio: 6.186137718067193,
    dividendYield: 0.006083954603424043,
    enterpriseValueMultiple: 19.42524045388039,
    priceFairValue: 48.14034011071204,
  },
  {
    symbol: 'AAPL',
    date: '2021-09-25',
    calendarYear: '2021',
    period: 'FY',
    currentRatio: 1.0745531195957954,
    quickRatio: 0.9096596297447422,
    cashRatio: 0.2784485300563432,
    daysOfSalesOutstanding: 51.390968708397914,
    daysOfInventoryOutstanding: 11.27659274770989,
    operatingCycle: 62.667561456107805,
    daysOfPayablesOutstanding: 93.85107122231561,
    cashConversionCycle: -31.183509766207806,
    grossProfitMargin: 0.4177935962516778,
    operatingProfitMargin: 0.29782377527561593,
    pretaxProfitMargin: 0.2985290459437369,
    netProfitMargin: 0.2588179335569424,
    effectiveTaxRate: 0.13302260844085087,
    returnOnAssets: 0.26974205275183616,
    returnOnEquity: 1.5007132667617689,
    returnOnCapitalEmployed: 0.48309913489209433,
    netIncomePerEBT: 0.8669773915591491,
    ebtPerEbit: 1.0023680804780217,
    ebitPerRevenue: 0.29782377527561593,
    debtRatio: 0.35532276169366556,
    debtEquityRatio: 1.9768426058012363,
    longTermDebtToCapitalization: 0.6336151826987851,
    totalDebtToCapitalization: 0.6640736066961648,
    interestCoverage: 41.19054820415879,
    cashFlowToDebtRatio: 0.8341792349201004,
    companyEquityMultiplier: 5.563512442542399,
    receivablesTurnover: 7.102415252591931,
    payablesTurnover: 3.889140478060004,
    inventoryTurnover: 32.367933130699086,
    fixedAssetTurnover: 9.275278904665315,
    assetTurnover: 1.042207736708053,
    operatingCashFlowPerShare: 6.229345884552985,
    freeCashFlowPerShare: 5.56562398361035,
    cashPerShare: 3.750552652516527,
    payoutRatio: 0.15279890156316012,
    operatingCashFlowSalesRatio: 0.284399030116151,
    freeCashFlowOperatingCashFlowRatio: 0.8934523923950864,
    cashFlowCoverageRatios: 0.8341792349201004,
    shortTermCoverageRatios: 6.663549606097483,
    capitalExpenditureCoverageRatio: -9.385475868290483,
    dividendPaidAndCapexCoverageRatio: 30.76227084565346,
    dividendPayoutRatio: 0.15279890156316012,
    priceBookValueRatio: 38.89286546584245,
    priceToBookRatio: 38.89286546584245,
    priceToSalesRatio: 6.707591178758778,
    priceEarningsRatio: 25.916253509083226,
    priceToFreeCashFlowsRatio: 26.39775889148279,
    priceToOperatingCashFlowsRatio: 23.585140835463964,
    priceCashFlowRatio: 23.585140835463964,
    priceEarningsToGrowthRatio: 0.3634864369282435,
    priceSalesRatio: 6.707591178758778,
    dividendYield: 0.0058958715429144335,
    enterpriseValueMultiple: 21.155006381276355,
    priceFairValue: 38.89286546584245,
  },
  {
    symbol: 'AAPL',
    date: '2020-09-26',
    calendarYear: '2020',
    period: 'FY',
    currentRatio: 1.3636044481554577,
    quickRatio: 1.2181949294064065,
    cashRatio: 0.36071049035979963,
    daysOfSalesOutstanding: 49.78753437881355,
    daysOfInventoryOutstanding: 8.741883356235881,
    operatingCycle: 58.52941773504943,
    daysOfPayablesOutstanding: 91.04818971567418,
    cashConversionCycle: -32.518771980624756,
    grossProfitMargin: 0.38233247727810865,
    operatingProfitMargin: 0.24147314354406862,
    pretaxProfitMargin: 0.24439830246070343,
    netProfitMargin: 0.20913611278072236,
    effectiveTaxRate: 0.14428164731484103,
    returnOnAssets: 0.1772557180259843,
    returnOnEquity: 0.8786635853012749,
    returnOnCapitalEmployed: 0.3033831282952548,
    netIncomePerEBT: 0.855718352685159,
    ebtPerEbit: 1.0121138064204682,
    ebitPerRevenue: 0.24147314354406862,
    debtRatio: 0.34714469199229364,
    debtEquityRatio: 1.720809929750991,
    longTermDebtToCapitalization: 0.6016060388034584,
    totalDebtToCapitalization: 0.6324623822247223,
    interestCoverage: 23.07274625826662,
    cashFlowToDebtRatio: 0.7175104059198122,
    companyEquityMultiplier: 4.957039440456695,
    receivablesTurnover: 7.331152356789959,
    payablesTurnover: 4.008866086627577,
    inventoryTurnover: 41.75301649839941,
    fixedAssetTurnover: 7.466545177609748,
    assetTurnover: 0.8475615027416885,
    operatingCashFlowPerShare: 4.649230448454163,
    freeCashFlowPerShare: 4.2280138811865,
    cashPerShare: 5.241031369137106,
    payoutRatio: 0.24526658654264863,
    operatingCashFlowSalesRatio: 0.2938782944465694,
    freeCashFlowOperatingCashFlowRatio: 0.909400798274537,
    cashFlowCoverageRatios: 0.7175104059198122,
    shortTermCoverageRatios: 5.8591037838623,
    capitalExpenditureCoverageRatio: -11.037624846080176,
    dividendPaidAndCapexCoverageRatio: 11.912876550502068,
    dividendPayoutRatio: 0.2452665865426486,
    priceBookValueRatio: 29.818269660080503,
    priceToBookRatio: 29.818269660080503,
    priceToSalesRatio: 7.0972293729668685,
    priceEarningsRatio: 33.93593425162425,
    priceToFreeCashFlowsRatio: 26.556204202548898,
    priceToOperatingCashFlowsRatio: 24.150233300939583,
    priceCashFlowRatio: 24.150233300939583,
    priceEarningsToGrowthRatio: 3.1708888566361435,
    priceSalesRatio: 7.0972293729668685,
    dividendYield: 0.007227341517226967,
    enterpriseValueMultiple: 26.152202127120397,
    priceFairValue: 29.818269660080503,
  },
  {
    symbol: 'AAPL',
    date: '2019-09-28',
    calendarYear: '2019',
    period: 'FY',
    currentRatio: 1.540125617208044,
    quickRatio: 1.3844473032028604,
    cashRatio: 0.46202160464632325,
    daysOfSalesOutstanding: 64.25876528784583,
    daysOfInventoryOutstanding: 9.263638723714628,
    operatingCycle: 73.52240401156047,
    daysOfPayablesOutstanding: 104.31407696777144,
    cashConversionCycle: -30.791672956210974,
    grossProfitMargin: 0.3781776810903472,
    operatingProfitMargin: 0.24572017188496928,
    pretaxProfitMargin: 0.2526655238417367,
    netProfitMargin: 0.21238094505984456,
    effectiveTaxRate: 0.1594383680423506,
    returnOnAssets: 0.16323009842961633,
    returnOnEquity: 0.6106445053487756,
    returnOnCapitalEmployed: 0.2746157613037913,
    netIncomePerEBT: 0.8405616319576494,
    ebtPerEbit: 1.0282652901611138,
    ebitPerRevenue: 0.24572017188496928,
    debtRatio: 0.3191784140188352,
    debtEquityRatio: 1.1940478295464592,
    longTermDebtToCapitalization: 0.5036177624180587,
    totalDebtToCapitalization: 0.5442214219155312,
    interestCoverage: 17.87751677852349,
    cashFlowToDebtRatio: 0.642229770377706,
    companyEquityMultiplier: 3.7410043320661304,
    receivablesTurnover: 5.68015893808401,
    payablesTurnover: 3.4990483605848257,
    inventoryTurnover: 39.40136385776912,
    fixedAssetTurnover: 6.960618545668575,
    assetTurnover: 0.7685722388306608,
    operatingCashFlowPerShare: 3.7566854936751732,
    freeCashFlowPerShare: 3.1885078588792926,
    cashPerShare: 5.443948396585932,
    payoutRatio: 0.25551976255972203,
    operatingCashFlowSalesRatio: 0.2667099710193947,
    freeCashFlowOperatingCashFlowRatio: 0.848755602311539,
    cashFlowCoverageRatios: 0.642229770377706,
    shortTermCoverageRatios: 4.272844827586207,
    capitalExpenditureCoverageRatio: -6.611815150071463,
    dividendPaidAndCapexCoverageRatio: 19.14762693156733,
    dividendPayoutRatio: 0.25551976255972203,
    priceBookValueRatio: 11.167964730793033,
    priceToBookRatio: 11.167964730793033,
    priceToSalesRatio: 3.8841959325682045,
    priceEarningsRatio: 18.28881555957724,
    priceToFreeCashFlowsRatio: 17.15849620619397,
    priceToOperatingCashFlowsRatio: 14.563369782248419,
    priceCashFlowRatio: 14.563369782248419,
    priceEarningsToGrowthRatio: -54.86644667873228,
    priceSalesRatio: 3.8841959325682045,
    dividendYield: 0.013971367458288728,
    enterpriseValueMultiple: 13.988124436889523,
    priceFairValue: 11.167964730793033,
  },
  {
    symbol: 'AAPL',
    date: '2018-09-29',
    calendarYear: '2018',
    period: 'FY',
    currentRatio: 1.1238426916297297,
    quickRatio: 0.9865658104153475,
    cashRatio: 0.22173258261598755,
    daysOfSalesOutstanding: 67.33249872926825,
    daysOfInventoryOutstanding: 8.817631109699796,
    operatingCycle: 76.15012983896804,
    daysOfPayablesOutstanding: 124.57021422115831,
    cashConversionCycle: -48.42008438219027,
    grossProfitMargin: 0.38343718820007905,
    operatingProfitMargin: 0.26694026619477024,
    pretaxProfitMargin: 0.27448935409175623,
    netProfitMargin: 0.22414202074587247,
    effectiveTaxRate: 0.18342180705869443,
    returnOnAssets: 0.16277530931710985,
    returnOnEquity: 0.5556011834209077,
    returnOnCapitalEmployed: 0.2848922482208801,
    netIncomePerEBT: 0.8165781929413056,
    ebtPerEbit: 1.0282800643177523,
    ebitPerRevenue: 0.26694026619477024,
    debtRatio: 0.31303028231594776,
    debtEquityRatio: 1.0684666859548098,
    longTermDebtToCapitalization: 0.46661721806831874,
    totalDebtToCapitalization: 0.5165501060325768,
    interestCoverage: 21.882098765432097,
    cashFlowToDebtRatio: 0.6763798991990078,
    companyEquityMultiplier: 3.4133013523477094,
    receivablesTurnover: 5.42085927135422,
    payablesTurnover: 2.9300744345834526,
    inventoryTurnover: 41.3943377148635,
    fixedAssetTurnover: 6.430248886306411,
    assetTurnover: 0.7262150522933899,
    operatingCashFlowPerShare: 3.9065645257666572,
    freeCashFlowPerShare: 3.2349203703371106,
    cashPerShare: 3.344901911600268,
    payoutRatio: 0.23033377567989788,
    operatingCashFlowSalesRatio: 0.29154916319960844,
    freeCashFlowOperatingCashFlowRatio: 0.8280729395356046,
    cashFlowCoverageRatios: 0.6763798991990078,
    shortTermCoverageRatios: 3.732118758434548,
    capitalExpenditureCoverageRatio: -5.816420040561857,
    dividendPaidAndCapexCoverageRatio: 194.0701754385965,
    dividendPayoutRatio: 0.23033377567989785,
    priceBookValueRatio: 10.441038120712665,
    priceToBookRatio: 10.441038120712665,
    priceToSalesRatio: 4.212149744987669,
    priceEarningsRatio: 18.79232520065176,
    priceToFreeCashFlowsRatio: 17.447106431902185,
    priceToOperatingCashFlowsRatio: 14.447476709455794,
    priceCashFlowRatio: 14.447476709455794,
    priceEarningsToGrowthRatio: 0.6411499186104718,
    priceSalesRatio: 4.212149744987669,
    dividendYield: 0.012256800221396198,
    enterpriseValueMultiple: 14.758938295619858,
    priceFairValue: 10.441038120712665,
  },
  {
    symbol: 'AAPL',
    date: '2017-09-30',
    calendarYear: '2017',
    period: 'FY',
    currentRatio: 1.2760628484139107,
    quickRatio: 1.0896700855039974,
    cashRatio: 0.2012518102644474,
    daysOfSalesOutstanding: 56.80067093014126,
    daysOfInventoryOutstanding: 12.563630820713515,
    operatingCycle: 69.36430175085478,
    daysOfPayablesOutstanding: 126.92760620497985,
    cashConversionCycle: -57.563304454125074,
    grossProfitMargin: 0.38469860491899105,
    operatingProfitMargin: 0.2676042820872994,
    pretaxProfitMargin: 0.27957894553164014,
    netProfitMargin: 0.21092420845075338,
    effectiveTaxRate: 0.24556476150353415,
    returnOnAssets: 0.12882641166580963,
    returnOnEquity: 0.3607018433832909,
    returnOnCapitalEmployed: 0.22347133931986668,
    netIncomePerEBT: 0.7544352384964659,
    ebtPerEbit: 1.0447476525821595,
    ebitPerRevenue: 0.2676042820872994,
    debtRatio: 0.3082178093834845,
    debtEquityRatio: 0.8629808947607929,
    longTermDebtToCapitalization: 0.42034732372196804,
    totalDebtToCapitalization: 0.4632258426201412,
    interestCoverage: 26.40723202755058,
    cashFlowToDebtRatio: 0.5497752420470263,
    companyEquityMultiplier: 2.799906003118309,
    receivablesTurnover: 6.425980433380988,
    payablesTurnover: 2.8756549572876104,
    inventoryTurnover: 29.05211122554068,
    fixedAssetTurnover: 6.785483823224699,
    assetTurnover: 0.6107711040474902,
    operatingCashFlowPerShare: 3.047491375711535,
    freeCashFlowPerShare: 2.4343800805099707,
    cashPerShare: 3.5546079710314378,
    payoutRatio: 0.264089677566131,
    operatingCashFlowSalesRatio: 0.27743702941099485,
    freeCashFlowOperatingCashFlowRatio: 0.7988144281266707,
    cashFlowCoverageRatios: 0.5497752420470263,
    shortTermCoverageRatios: 3.4427542900449306,
    capitalExpenditureCoverageRatio: -4.9705353653771,
    dividendPaidAndCapexCoverageRatio: -2446.076923076923,
    dividendPayoutRatio: 0.26408967756613105,
    priceBookValueRatio: 5.998503040276918,
    priceToBookRatio: 5.998503040276918,
    priceToSalesRatio: 3.5076879391364284,
    priceEarningsRatio: 16.630087010403095,
    priceToFreeCashFlowsRatio: 15.827438085152451,
    priceToOperatingCashFlowsRatio: 12.643185902701342,
    priceCashFlowRatio: 12.643185902701342,
    priceEarningsToGrowthRatio: 1.5111687761627157,
    priceSalesRatio: 3.5076879391364284,
    dividendYield: 0.015880234264614938,
    enterpriseValueMultiple: 12.579856743821765,
    priceFairValue: 5.998503040276918,
  },
  {
    symbol: 'AAPL',
    date: '2016-09-24',
    calendarYear: '2016',
    period: 'FY',
    currentRatio: 1.352669417512594,
    quickRatio: 1.2208439865326683,
    cashRatio: 0.2592714477381465,
    daysOfSalesOutstanding: 49.59276846952546,
    daysOfInventoryOutstanding: 5.923304104250396,
    operatingCycle: 55.51607257377586,
    daysOfPayablesOutstanding: 103.61336926074777,
    cashConversionCycle: -48.097296686971916,
    grossProfitMargin: 0.3907595564809705,
    operatingProfitMargin: 0.29014695857428385,
    pretaxProfitMargin: 0.284605289395703,
    netProfitMargin: 0.211867983064288,
    effectiveTaxRate: 0.2555725738121619,
    returnOnAssets: 0.14202358821956815,
    returnOnEquity: 0.3562366958026963,
    returnOnCapitalEmployed: 0.25781687819350585,
    netIncomePerEBT: 0.7444274261878381,
    ebtPerEbit: 0.9809004746911311,
    ebitPerRevenue: 0.29014695857428385,
    debtRatio: 0.2705495421000603,
    debtEquityRatio: 0.6786173771335449,
    longTermDebtToCapitalization: 0.37032836465759345,
    totalDebtToCapitalization: 0.40427162638597924,
    interestCoverage: 42.97184065934066,
    cashFlowToDebtRatio: 0.756319514661274,
    companyEquityMultiplier: 2.5082924623193943,
    receivablesTurnover: 7.359944025393358,
    payablesTurnover: 3.5227114281117604,
    inventoryTurnover: 61.62101313320826,
    fixedAssetTurnover: 7.9836727138097,
    assetTurnover: 0.670340021014281,
    operatingCashFlowPerShare: 3.007958587560914,
    freeCashFlowPerShare: 2.38885578395926,
    cashPerShare: 3.0687812795888,
    payoutRatio: 0.26593998292730975,
    operatingCashFlowSalesRatio: 0.30525090544845784,
    freeCashFlowOperatingCashFlowRatio: 0.79417841516772,
    cashFlowCoverageRatios: 0.756319514661274,
    shortTermCoverageRatios: 5.672037914691943,
    capitalExpenditureCoverageRatio: -4.858576911721287,
    dividendPaidAndCapexCoverageRatio: -47.084406294706724,
    dividendPayoutRatio: 0.26593998292730975,
    priceBookValueRatio: 4.808387047072491,
    priceToBookRatio: 4.808387047072491,
    priceToSalesRatio: 2.859737016031423,
    priceEarningsRatio: 13.49773087311489,
    priceToFreeCashFlowsRatio: 11.796442543423368,
    priceToOperatingCashFlowsRatio: 9.368480043753038,
    priceCashFlowRatio: 9.368480043753038,
    priceEarningsToGrowthRatio: -1.3615102445924585,
    priceSalesRatio: 2.859737016031423,
    dividendYield: 0.019702569670952286,
    enterpriseValueMultiple: 9.687062490606701,
    priceFairValue: 4.808387047072491,
  },
  {
    symbol: 'AAPL',
    date: '2015-09-26',
    calendarYear: '2015',
    period: 'FY',
    currentRatio: 1.1087706239920605,
    quickRatio: 0.8924947277012778,
    cashRatio: 0.2620022329735765,
    daysOfSalesOutstanding: 47.387608839826285,
    daysOfInventoryOutstanding: 6.120287817030602,
    operatingCycle: 53.507896656856886,
    daysOfPayablesOutstanding: 92.46871631605622,
    cashConversionCycle: -38.96081965919933,
    grossProfitMargin: 0.4005990201741437,
    operatingProfitMargin: 0.3047729071732666,
    pretaxProfitMargin: 0.31027105662880006,
    netProfitMargin: 0.22845773698735639,
    effectiveTaxRate: 0.26368337585327173,
    returnOnAssets: 0.1838136319665105,
    returnOnEquity: 0.44735453060198566,
    returnOnCapitalEmployed: 0.3394021985143113,
    netIncomePerEBT: 0.7363166241467283,
    ebtPerEbit: 1.0180401516215078,
    ebitPerRevenue: 0.3047729071732666,
    debtRatio: 0.2219162142530097,
    debtEquityRatio: 0.5400862971806795,
    longTermDebtToCapitalization: 0.30936013609693436,
    totalDebtToCapitalization: 0.3506857363573554,
    interestCoverage: 97.17598908594816,
    cashFlowToDebtRatio: 1.260680711116627,
    companyEquityMultiplier: 2.433739684135562,
    receivablesTurnover: 7.702435487591866,
    payablesTurnover: 3.947280924204001,
    inventoryTurnover: 59.63771817794807,
    fixedAssetTurnover: 10.400738729918562,
    assetTurnover: 0.8045848409007191,
    operatingCashFlowPerShare: 3.5312034353126602,
    freeCashFlowPerShare: 3.0320221655950435,
    cashPerShare: 1.8076636491576055,
    payoutRatio: 0.2165224557066337,
    operatingCashFlowSalesRatio: 0.3477140962283123,
    freeCashFlowOperatingCashFlowRatio: 0.8586370683926857,
    cashFlowCoverageRatios: 1.260680711116627,
    shortTermCoverageRatios: 7.388489862714792,
    capitalExpenditureCoverageRatio: -7.0739902506963785,
    dividendPaidAndCapexCoverageRatio: 1113.2328767123288,
    dividendPayoutRatio: 0.21652245570663367,
    priceBookValueRatio: 5.529994194797034,
    priceToBookRatio: 5.529994194797034,
    priceToSalesRatio: 2.8240911243180795,
    priceEarningsRatio: 12.361547310933812,
    priceToFreeCashFlowsRatio: 9.459033751612257,
    priceToOperatingCashFlowsRatio: 8.121877010311815,
    priceCashFlowRatio: 8.121877010311815,
    priceEarningsToGrowthRatio: 0.2860815234816113,
    priceSalesRatio: 2.8240911243180795,
    dividendYield: 0.01751580528394849,
    enterpriseValueMultiple: 8.527094658794718,
    priceFairValue: 5.529994194797034,
  },
  {
    symbol: 'AAPL',
    date: '2014-09-27',
    calendarYear: '2014',
    period: 'FY',
    currentRatio: 1.0801128483167317,
    quickRatio: 0.8242340184087756,
    cashRatio: 0.21819442693229102,
    daysOfSalesOutstanding: 54.35014633879483,
    daysOfInventoryOutstanding: 6.863786990682178,
    operatingCycle: 61.21393332947701,
    daysOfPayablesOutstanding: 98.18044148301234,
    cashConversionCycle: -36.96650815353534,
    grossProfitMargin: 0.3858803577778386,
    operatingProfitMargin: 0.28722339232473537,
    pretaxProfitMargin: 0.29258458929401787,
    netProfitMargin: 0.21614376760852322,
    effectiveTaxRate: 0.26126058747639436,
    returnOnAssets: 0.17041998973425523,
    returnOnEquity: 0.3542004715501089,
    returnOnCapitalEmployed: 0.3117921979203164,
    netIncomePerEBT: 0.7387394125236056,
    ebtPerEbit: 1.0186656000609489,
    ebitPerRevenue: 0.28722339232473537,
    debtRatio: 0.15223926949305336,
    debtEquityRatio: 0.31641370901951643,
    longTermDebtToCapitalization: 0.20626325302062135,
    totalDebtToCapitalization: 0.2403603873551164,
    interestCoverage: 136.7265625,
    cashFlowToDebtRatio: 1.6918260376823913,
    companyEquityMultiplier: 2.0783974468161404,
    receivablesTurnover: 6.715713288511702,
    payablesTurnover: 3.71764472115512,
    inventoryTurnover: 53.17764092846992,
    fixedAssetTurnover: 8.863217610550814,
    assetTurnover: 0.7884566444817308,
    operatingCashFlowPerShare: 2.4530561794355568,
    freeCashFlowPerShare: 2.0499305570618507,
    cashPerShare: 1.0301825366621247,
    payoutRatio: 0.2815995950392306,
    operatingCashFlowSalesRatio: 0.32666648431302825,
    freeCashFlowOperatingCashFlowRatio: 0.8356639257783063,
    cashFlowCoverageRatios: 1.6918260376823913,
    shortTermCoverageRatios: 9.466233354470514,
    capitalExpenditureCoverageRatio: -6.085091205543667,
    dividendPaidAndCapexCoverageRatio: 45.47829398324448,
    dividendPayoutRatio: 0.28159959503923054,
    priceBookValueRatio: 5.497075086914037,
    priceToBookRatio: 5.497075086914037,
    priceToSalesRatio: 3.3544803453048497,
    priceEarningsRatio: 15.519671848139712,
    priceToFreeCashFlowsRatio: 12.288221136673346,
    priceToOperatingCashFlowsRatio: 10.26882311590441,
    priceCashFlowRatio: 10.26882311590441,
    priceEarningsToGrowthRatio: 1.168059512781041,
    priceSalesRatio: 3.3544803453048497,
    dividendYield: 0.01814468745181522,
    enterpriseValueMultiple: 10.266986470807112,
    priceFairValue: 5.497075086914037,
  },
  {
    symbol: 'AAPL',
    date: '2013-09-28',
    calendarYear: '2013',
    period: 'FY',
    currentRatio: 1.6786385084062485,
    quickRatio: 1.4015071693618582,
    cashRatio: 0.3266068074579688,
    daysOfSalesOutstanding: 44.08147563044877,
    daysOfInventoryOutstanding: 6.039622535316962,
    operatingCycle: 50.12109816576573,
    daysOfPayablesOutstanding: 76.58063336022363,
    cashConversionCycle: -26.4595351944579,
    grossProfitMargin: 0.3762448072084723,
    operatingProfitMargin: 0.29535428003042535,
    pretaxProfitMargin: 0.293458545433269,
    netProfitMargin: 0.21670469837926393,
    effectiveTaxRate: 0.2615491974877879,
    returnOnAssets: 0.17892270531400967,
    returnOnEquity: 0.29977579745687943,
    returnOnCapitalEmployed: 0.3090387040687637,
    netIncomePerEBT: 0.7384508025122122,
    ebtPerEbit: 0.9935814893321976,
    ebitPerRevenue: 0.29535428003042535,
    debtRatio: 0.08193236714975845,
    debtEquityRatio: 0.1372734704449247,
    longTermDebtToCapitalization: 0.12070401184265776,
    totalDebtToCapitalization: 0.12070401184265776,
    interestCoverage: 371.16911764705884,
    cashFlowToDebtRatio: 3.164268867924528,
    companyEquityMultiplier: 1.6754486074351067,
    receivablesTurnover: 8.280122087108182,
    payablesTurnover: 4.766218089149193,
    inventoryTurnover: 60.43424036281179,
    fixedAssetTurnover: 10.297644152557691,
    assetTurnover: 0.8256521739130435,
    operatingCashFlowPerShare: 2.071305140693284,
    freeCashFlowPerShare: 1.721005780634173,
    cashPerShare: 1.564922636949836,
    payoutRatio: 0.28522828522828525,
    operatingCashFlowSalesRatio: 0.3140015212685039,
    freeCashFlowOperatingCashFlowRatio: 0.8308798867066671,
    cashFlowCoverageRatios: 3.164268867924528,
    shortTermCoverageRatios: 0,
    capitalExpenditureCoverageRatio: -5.9129572498898195,
    dividendPaidAndCapexCoverageRatio: 36.06586021505376,
    dividendPayoutRatio: 0.28522828522828525,
    priceBookValueRatio: 3.6153734981262495,
    priceToBookRatio: 3.6153734981262495,
    priceToSalesRatio: 2.613514600198935,
    priceEarningsRatio: 12.060258128898127,
    priceToFreeCashFlowsRatio: 10.017398078492935,
    priceToOperatingCashFlowsRatio: 8.323254580553796,
    priceCashFlowRatio: 8.323254580553796,
    priceEarningsToGrowthRatio: -1.1984881515592503,
    priceSalesRatio: 2.613514600198935,
    dividendYield: 0.023650263715735646,
    enterpriseValueMultiple: 8.059702638639786,
    priceFairValue: 3.6153734981262495,
  },
  {
    symbol: 'AAPL',
    date: '2012-09-29',
    calendarYear: '2012',
    period: 'FY',
    currentRatio: 1.4958486845519174,
    quickRatio: 1.240750350267241,
    cashRatio: 0.27881272378184835,
    daysOfSalesOutstanding: 43.5925320111432,
    daysOfInventoryOutstanding: 3.286603829428773,
    operatingCycle: 46.87913584057197,
    daysOfPayablesOutstanding: 87.98209366391185,
    cashConversionCycle: -41.102957823339885,
    grossProfitMargin: 0.4387123980882766,
    operatingProfitMargin: 0.35295959311984054,
    pretaxProfitMargin: 0.35629488588442765,
    netProfitMargin: 0.26665090602397323,
    effectiveTaxRate: 0.25160052364471064,
    returnOnAssets: 0.23703312431842966,
    returnOnEquity: 0.35304119786820065,
    returnOnCapitalEmployed: 0.4016884571195881,
    netIncomePerEBT: 0.7483994763552894,
    ebtPerEbit: 1.0094495030864756,
    ebitPerRevenue: 0.35295959311984054,
    debtRatio: 0,
    debtEquityRatio: 0,
    longTermDebtToCapitalization: 0,
    totalDebtToCapitalization: 0,
    interestCoverage: -105.82567049808429,
    cashFlowToDebtRatio: 0,
    companyEquityMultiplier: 1.489417138989933,
    receivablesTurnover: 8.372993794136528,
    payablesTurnover: 4.148571428571429,
    inventoryTurnover: 111.05689001264223,
    fixedAssetTurnover: 10.128656484597464,
    assetTurnover: 0.88892675390767,
    operatingCashFlowPerShare: 1.9429297620346573,
    freeCashFlowPerShare: 1.583730736892101,
    cashPerShare: 1.1128598599635742,
    payoutRatio: 0.05961708959336736,
    operatingCashFlowSalesRatio: 0.32494185600736064,
    freeCashFlowOperatingCashFlowRatio: 0.8151250589900897,
    cashFlowCoverageRatios: 0,
    shortTermCoverageRatios: 0,
    capitalExpenditureCoverageRatio: -5.409061901723038,
    dividendPaidAndCapexCoverageRatio: -7.355510558287532,
    dividendPayoutRatio: 0.05961708959336735,
    priceBookValueRatio: 5.276609105151849,
    priceToBookRatio: 5.276609105151849,
    priceToSalesRatio: 3.98540625603803,
    priceEarningsRatio: 14.94615681403206,
    priceToFreeCashFlowsRatio: 15.046749706180345,
    priceToOperatingCashFlowsRatio: 12.264982741859367,
    priceCashFlowRatio: 12.264982741859367,
    priceEarningsToGrowthRatio: 0.2533246917632552,
    priceSalesRatio: 3.98540625603803,
    dividendYield: 0.003988790585777636,
    enterpriseValueMultiple: 10.475442809391982,
    priceFairValue: 5.276609105151849,
  },
  {
    symbol: 'AAPL',
    date: '2011-09-24',
    calendarYear: '2011',
    period: 'FY',
    currentRatio: 1.6084376117268502,
    quickRatio: 1.3467643904183053,
    cashRatio: 0.35091169109760456,
    daysOfSalesOutstanding: 39.508032406765885,
    daysOfInventoryOutstanding: 4.3960205491145565,
    operatingCycle: 43.904052955880445,
    daysOfPayablesOutstanding: 82.88991324052087,
    cashConversionCycle: -38.985860284640424,
    grossProfitMargin: 0.40478895878945764,
    operatingProfitMargin: 0.31215068961376086,
    pretaxProfitMargin: 0.31598444327430275,
    netProfitMargin: 0.2394664153941376,
    effectiveTaxRate: 0.24215757930127174,
    returnOnAssets: 0.22275309140593447,
    returnOnEquity: 0.3383410559289956,
    returnOnCapitalEmployed: 0.3822354950735851,
    netIncomePerEBT: 0.7578424206987282,
    ebtPerEbit: 1.0122817401598105,
    ebitPerRevenue: 0.31215068961376086,
    debtRatio: 0,
    debtEquityRatio: 0,
    longTermDebtToCapitalization: 0,
    totalDebtToCapitalization: 0,
    interestCoverage: -81.42168674698796,
    cashFlowToDebtRatio: 0,
    companyEquityMultiplier: 1.518906219408732,
    receivablesTurnover: 9.238627635060169,
    payablesTurnover: 4.40343083652269,
    inventoryTurnover: 83.02963917525773,
    fixedAssetTurnover: 13.919120483476918,
    assetTurnover: 0.9302059791528817,
    operatingCashFlowPerShare: 1.450159401997525,
    freeCashFlowPerShare: 1.1622064092802782,
    cashPerShare: 1.0028121399621566,
    payoutRatio: 0,
    operatingCashFlowSalesRatio: 0.3466914244011492,
    freeCashFlowOperatingCashFlowRatio: 0.8014335580484425,
    cashFlowCoverageRatios: 0,
    shortTermCoverageRatios: 0,
    capitalExpenditureCoverageRatio: -5.036097691894794,
    dividendPaidAndCapexCoverageRatio: -5.036097691894794,
    dividendPayoutRatio: 0,
    priceBookValueRatio: 4.877582647784376,
    priceToBookRatio: 4.877582647784376,
    priceToSalesRatio: 3.452188884516254,
    priceEarningsRatio: 14.416171381837822,
    priceToFreeCashFlowsRatio: 12.42464323436513,
    priceToOperatingCashFlowsRatio: 9.957526034799756,
    priceCashFlowRatio: 9.957526034799756,
    priceEarningsToGrowthRatio: 0.17619765022246228,
    priceSalesRatio: 3.452188884516254,
    dividendYield: 0,
    enterpriseValueMultiple: 10.220227911470621,
    priceFairValue: 4.877582647784376,
  },
];

const AAPL_ANALYST_ESTIMATES = [
  {
    symbol: 'AAPL',
    date: '2026-09-30',
    estimatedRevenueLow: 461811026181,
    estimatedRevenueHigh: 489348624514,
    estimatedRevenueAvg: 475203000000,
    estimatedEbitdaLow: 144424694736,
    estimatedEbitdaHigh: 153036678876,
    estimatedEbitdaAvg: 148612840149,
    estimatedEbitLow: 128024975908,
    estimatedEbitHigh: 135659051673,
    estimatedEbitAvg: 131737548861,
    estimatedNetIncomeLow: 113534087467,
    estimatedNetIncomeHigh: 143261675829,
    estimatedNetIncomeAvg: 117172666670,
    estimatedSgaExpenseLow: 30611332990,
    estimatedSgaExpenseHigh: 32436673973,
    estimatedSgaExpenseAvg: 31499025459,
    estimatedEpsAvg: 8,
    estimatedEpsHigh: 9.06,
    estimatedEpsLow: 7.18,
    numberAnalystEstimatedRevenue: 3,
    numberAnalystsEstimatedEps: 3,
  },
  {
    symbol: 'AAPL',
    date: '2025-09-30',
    estimatedRevenueLow: 426675125000,
    estimatedRevenueHigh: 442628810000,
    estimatedRevenueAvg: 427024215020,
    estimatedEbitdaLow: 133436451678,
    estimatedEbitdaHigh: 138425735077,
    estimatedEbitdaAvg: 133545624515,
    estimatedEbitLow: 118284470274,
    estimatedEbitHigh: 122707210360,
    estimatedEbitAvg: 118381246312,
    estimatedNetIncomeLow: 96298411236,
    estimatedNetIncomeHigh: 126184125067,
    estimatedNetIncomeAvg: 106630781930,
    estimatedSgaExpenseLow: 28282335392,
    estimatedSgaExpenseHigh: 29339831935,
    estimatedSgaExpenseAvg: 28305474967,
    estimatedEpsAvg: 7.10865,
    estimatedEpsHigh: 7.98,
    estimatedEpsLow: 6.09,
    numberAnalystEstimatedRevenue: 15,
    numberAnalystsEstimatedEps: 15,
  },
  {
    symbol: 'AAPL',
    date: '2024-09-30',
    estimatedRevenueLow: 386820000000,
    estimatedRevenueHigh: 414630000000,
    estimatedRevenueAvg: 400500000000,
    estimatedEbitdaLow: 120972339876,
    estimatedEbitdaHigh: 129669513683,
    estimatedEbitdaAvg: 125250561296,
    estimatedEbitLow: 107235683804,
    estimatedEbitHigh: 114945275776,
    estimatedEbitAvg: 111028104450,
    estimatedNetIncomeLow: 98986544226,
    estimatedNetIncomeHigh: 106260315846,
    estimatedNetIncomeAvg: 99822415940,
    estimatedSgaExpenseLow: 25640522110,
    estimatedSgaExpenseHigh: 27483919348,
    estimatedSgaExpenseAvg: 26547306512,
    estimatedEpsAvg: 6.39,
    estimatedEpsHigh: 6.72,
    estimatedEpsLow: 6.26,
    numberAnalystEstimatedRevenue: 29,
    numberAnalystsEstimatedEps: 32,
  },
];
describe(`${GetAnnuallyIncomeStatementV2UseCase.name} specs`, () => {
  let useCase: GetAnnuallyIncomeStatementV2UseCase;
  let financialModelingPrepService: DeepMocked<FinancialModelingPrepService>;

  beforeEach(async () => {
    const app: TestingModule = await Test.createTestingModule({
      providers: [
        GetAnnuallyIncomeStatementV2UseCase,
        {
          provide: FinancialModelingPrepService,
          useValue: createMock<FinancialModelingPrepService>(),
        },
      ],
    }).compile();

    useCase = app.get(GetAnnuallyIncomeStatementV2UseCase);
    financialModelingPrepService = app.get(FinancialModelingPrepService);
  });

  it('should return history of income statement', async () => {
    financialModelingPrepService.getIncomeStatements.mockResolvedValue(
      AAPL_INCOME_STATEMENTS,
    );

    financialModelingPrepService.getEnterpriseRatios.mockResolvedValue(
      AAPL_RATIOS,
    );

    financialModelingPrepService.getAnalystEstimates.mockResolvedValue(
      AAPL_ANALYST_ESTIMATES,
    );

    const incomeStatementGrowthHistory = await useCase.execute('AAPL');

    expect(incomeStatementGrowthHistory.toFinancialRecordDtos()).toEqual([
      {
        acceptedDate: '2019-10-30 18:12:36',
        earnings: {
          current: 2.97,
          growth: null,
          previous: null,
        },
        netProfitMargin: 0.21238094505984456,
        period: '2019',
        sales: {
          current: 260174000000,
          growth: null,
          previous: null,
        },
      },
      {
        acceptedDate: '2020-10-29 18:06:25',
        earnings: {
          current: 3.28,
          growth: 10.44,
          previous: 2.97,
        },
        netProfitMargin: 0.20913611278072236,
        period: '2020',
        sales: {
          current: 274515000000,
          growth: 5.512,
          previous: 260174000000,
        },
      },
      {
        acceptedDate: '2021-10-28 18:04:28',
        earnings: {
          current: 5.61,
          growth: 71.04,
          previous: 3.28,
        },
        netProfitMargin: 0.2588179335569424,
        period: '2021',
        sales: {
          current: 365817000000,
          growth: 33.26,
          previous: 274515000000,
        },
      },
      {
        acceptedDate: '2022-10-27 18:01:14',
        earnings: {
          current: 6.11,
          growth: 8.913,
          previous: 5.61,
        },
        netProfitMargin: 0.2530964070519973,
        period: '2022',
        sales: {
          current: 394328000000,
          growth: 7.794,
          previous: 365817000000,
        },
      },
      {
        acceptedDate: '2023-11-02 18:08:27',
        earnings: {
          current: 6.13,
          growth: 0.3273,
          previous: 6.11,
        },
        netProfitMargin: 0.2530623426432028,
        period: '2023',
        sales: {
          current: 383285000000,
          growth: -2.8,
          previous: 394328000000,
        },
      },
      {
        earnings: {
          current: 6.39,
          growth: 4.241,
          previous: 6.13,
        },
        netProfitMargin: null,
        period: '2024',
        sales: {
          current: 400500000000,
          growth: 4.491,
          previous: 383285000000,
        },
      },
      {
        earnings: {
          current: 7.10865,
          growth: 11.25,
          previous: 6.39,
        },
        netProfitMargin: null,
        period: '2025',
        sales: {
          current: 427024215020,
          growth: 6.623,
          previous: 400500000000,
        },
      },
    ]);
  });
});
